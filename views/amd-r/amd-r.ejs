<html lang="en"><head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>AMD-R Dashboard</title>
        <style type="text/css">
         table.dashboard {
             width: 100%;
             height: 86vh;
         }
         td.dashboard {
             border: 1px solid;
             width: 33%;
             text-align: center;
         }
         tr.dashboard {
             height: 50%;
         }
         div.bar-frame {
             outline: solid;
             outline-width: 1px;
             outline-color: black;
             width: 80%;
             height: 1vh;
             position: relative;
             /* https://www.freecodecamp.org/news/how-to-center-anything-with-css-align-a-div-text-and-more/ */
             margin: 0 auto;
         }
         div.bar {
             background: black;
             height:100%;
             position: absolute;
         }
         h1.title {
             font-size: 5vh;
             text-align: center;
         }
         button.call-home {
             width: 49%;
             height: 70%;
         }
        </style>
    </head>
    <body>
        <h1 class="title">Dashboard for <span id="name">AMD-R</span> </h1>
        <table class="dashboard">
            <tbody><tr class="dashboard">
                <td class="dashboard">
                    Call/Home
                    <hr>
                    <button class="call-home">MAIL</button>
                    <button class="call-home">HOME</button>
                </td>
                <td class="dashboard">
                    Battery
                    <hr>
                    <div id="battery">79.10798444485604%</div>
                    <div class="bar-frame">
                        <div id="battery-bar" class="bar" style="width: 79.108%;">
                    </div>
                </div></td>
                <td rowspan="2" class="dashboard">
                    Map
                    <hr>
                </td>
            </tr>
            <tr class="dashboard">
                <td class="dashboard">
                    Task
                    <hr>
                </td>
                <td class="dashboard">
                    Speed
                    <hr>
                    <div id="speed">1.48889305478132 m/s</div>
                    <div class="bar-frame">
                        <div id="speed-bar" class="bar" style="width: 74.4447%;"></div>
                    </div>
                </td>
            </tr>
        </tbody></table>
        <script>
         const id = window.location.pathname.split('/')[2];
         async function getData(id) {
             const res = await fetch('/api/amd-r/getData', {
                 method: 'POST',
                 body: JSON.stringify({id}),
                 headers: { 'Content-Type': 'application/json' }
             });
             const data = await res.json()
             document.getElementById('name').innerHTML = data.name;
             document.getElementById('battery').innerHTML = data.battery + "%";
             document.getElementById('battery-bar').style.width = data.battery + "%";
             document.getElementById('speed').innerHTML = data.speed + " m/s";
             document.getElementById('speed-bar').style.width = data.speed / 2 * 100 + "%";
         };
         getData(id)
        </script>
    </body>
</html>
